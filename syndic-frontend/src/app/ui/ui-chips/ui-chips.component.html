<div
  class="w-full relative rounded border transition-all ease-in-out duration-100
         text-[var(--color-text)]
         border-(--color-border)
         outline outline-transparent
         hover:border-[var(--color-text)]/30
         focus-within:border-[var(--color-primary)]
         focus-within:outline-[var(--color-ring)]/25"
  [class.opacity-60]="disabled()"
  [class.pointer-events-none]="disabled()"
>
  <label
    [for]="id()"
    class="absolute text-sm font-bold top-0 left-0 px-3 pt-3
           text-[var(--color-primary)]"
    [class.text-(--color-muted)]="disabled()"
  >
    {{ label() }}
    @if (required()) { <span class="text-inherit">*</span> }
  </label>

  <!-- Chips and Input Container -->
  <div class="flex flex-wrap gap-2 pt-9 px-3 pb-3">
    <!-- Chips -->
    @for (chip of value; track chip) {
      <div
        class="px-2 py-1 rounded-full text-xs flex items-center
               bg-[var(--color-primary)] text-[var(--color-text)]"
      >
        {{ chip }}
        <button
          type="button"
          (click)="removeChip(chip)"
          class="ml-1 hover:text-[var(--color-primary-600)]"
        >
          &times;
        </button>
      </div>
    }

    <!-- Text input -->
    <div class="relative">
      <input
        type="text"
        [(ngModel)]="inputText"
        (input)="onInputChange()"
        (keydown.enter)="selectSuggestion(inputText)"
        placeholder="Type ..."
        class="bg-transparent border-none text-sm outline-none w-32
               placeholder-[var(--color-muted)] placeholder:italic
               text-[var(--color-black)]"
        [disabled]="disabled()"
      />

      <!-- Suggestions -->
      @if (filteredSuggestions.length > 0) {
        <div
          class="absolute left-0 top-full mt-1 rounded w-full min-w-[150px] z-50
                 border border-(--color-border)
                 bg-(--color-surface)"
          style="box-shadow: var(--shadow-elev);"
        >
          @for (suggestion of filteredSuggestions; track suggestion) {
            <div
              (click)="selectSuggestion(suggestion)"
              class="px-3 py-2 cursor-pointer text-sm
                     hover:bg-[var(--color-border)]/30
                     text-[var(--color-text)]"
            >
              {{ suggestion }}
            </div>
          }
        </div>
      }
    </div>
  </div>
</div>
